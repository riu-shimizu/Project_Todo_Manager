# 📘 プロジェクト管理＆Todo統合アプリ 要件定義書（改訂・完全版 v2）

## 1. システム概要

本システムは、**1〜10 名程度の小規模プロジェクト向け**に設計された、
**タスク階層管理 + 実用的 Todo 管理**を統合した Web アプリである。

タスクは **大項目 → 中項目 → 小項目 → Todo** の 4 階層で構成され、
特に進捗管理を重視した設計とする。

主な特徴：

* 大中小項目はすべてプロジェクト管理のため、**予定・実績の記入は必須**
* 最下層の「Todo」は作業単位として、**ステータス管理 & 担当者管理が必須**
* Todo の担当者は **デフォルト＝作成者（現状はデモユーザー固定）**
* 大中小項目＋Todo をブラウザ上の縦階層リストで編集
* 今日が期限の Todo を自動で抽出して表示
* UI は**シンプル・軽量・高速**を最重視

---

## 2. 目的

* **プロジェクト構造を階層的に整理**し、進捗を自動集計して把握しやすくする
* 大掛かりな PM ツールのような “重さ” を排除し、
  小規模チームでも無理なく使える **必要最低限の機能を持った軽量な進捗管理ツール**を提供
* 実際の作業者の視点では、**Todo と担当者の明確化で “今日やること” が一目でわかる**

---

## 3. 用語定義

| 用語         | 説明                                    |
| ---------- | ------------------------------------- |
| 大項目（Phase） | プロジェクトの主要工程。ガントチャートに常時表示される。          |
| 中項目（Work）  | 大項目を分解したサブ工程。進捗管理対象。                  |
| 小項目（Task）  | 実際の作業をまとめた単位。予定実績は必須。                 |
| Todo       | 小項目をさらに分解した「実際の作業タスク」。ステータスと担当者管理が必須。 |
| 進捗         | 子階層の “完了数/総数” から自動計算される。 |

---

## 4. ターゲットユーザー

* 1~10名程度の小規模の開発チーム・研究グループ・デザインチーム
* シンプルかつ直感的にプロジェクト進捗を管理したいユーザー
* 大型 PM ツール（Asana, Backlog, Notion）は重くて使いづらい人 
* プライベートプロジェクト・副業プロジェクトにも利用可能

---

## 5. 階層構造

```
プロジェクト
 └─ 大項目（ステータス・予定・実績・進捗必須）
      └─ 中項目（ステータス・予定・実績・進捗必須）
           └─ 小項目（ステータス・予定・実績・進捗必須）
                └─ Todo（ステータス・担当者必須）
```

---

## 6. 機能要件（現状実装ベース）

### 6.1 プロジェクト管理

* プロジェクト作成（名称 / 説明）
* プロジェクト一覧の表示（進捗率・件数サマリ含む）
* プロジェクトの選択 / 削除
* プロジェクト名・説明のインライン編集

※ メンバー設定・権限（オーナー / メンバー）・ガントチャート表示は **未実装（将来候補）**。

---

## 6.2 タスク管理（大・中・小・Todoの4階層）

### 6.2.1 階層構造と操作

| レベル  | 親   | 子    |
| ---- | --- | ---- |
| 大項目  | なし  | 中項目  |
| 中項目  | 大項目 | 小項目  |
| 小項目  | 中項目 | Todo |
| Todo | 小項目 | なし   |

操作（現状）：

* タスクを縦一列リストで表示（インデントで階層表示）
* 各階層のタイトル・予定日・ステータスをインライン編集
* Todo のタイトル・ステータス・期限日をインライン編集
* 大項目/中項目/小項目/Todo をボタンから追加・削除
* 大項目配下の中項目リスト / 中項目配下の小項目リスト / 小項目配下の Todo リストを折り畳み表示

※ ドラッグ＆ドロップでの並べ替えは **未実装**（サーバー側には `/api/reorder` は存在するが UI では未利用）。

---

### 6.2.2 各レベルの必須属性

#### ■ 大項目 / 中項目 / 小項目（共通・現状）

| 属性       | 必須 |
| -------- | -- |
| タイトル     | ✔  |
| 予定日      | ✔  |
| 実績日      | 任意 |
| ステータス    | ✔  |
| 進捗（自動計算） | ✔  |
| メモ       | 任意 |

* 項目の進捗は「子要素のステータス（未着手/進行中/完了）を 0/0.5/1 に変換した平均」から自動計算。

---

#### ■ Todo（最下層・現状）

| 属性                | 必須           |
| ----------------- | ------------ |
| タイトル              | ✔            |
| ステータス（未着手/進行中/完了） | ✔            |
| 担当者               | ✔（デフォルト＝作成者／現状はデモユーザー固定） |
| 期限                | 任意           |
| メモ                | 任意（フィールドのみ、UI は未提供） |
| 参考URL             | 任意（フィールドのみ、UI は未提供） |

---

### 6.2.3 進捗の計算

小項目の進捗は下記のロジック：

```
進捗 (%) = (子階層の完了数 / 子階層の総数) × 100
```

階層の例：
プロジェクト → その配下の大項目の完了数
中項目 →　その配下の小項目の完了数
小項目 → その配下のTodoから自動計算

※予定・実績が存在していても、進捗値は “完了率” から計算する


---

## 6.3 今日のTodo 画面（現状）

* 今日やるべき Todo（**期限が今日のもの**）を抽出して表示
* ステータス変更・タイトル編集が可能

※ 以前の仕様にあった「手動 Today フラグ」は、現在の抽出条件には使っていない（DB列は残存）。
※ ガントチャート / 検索・フィルタ / 担当者フィルタ / 優先順位ソートなどは **未実装（将来機能）**。

---

## 7. 非機能要件（現状）

### 7.1 性能・UI

* 小規模〜中規模プロジェクト（Todo 数百件程度）を想定した SPA
* すべてインライン編集でモーダルを極力排除
* 階層構造は collapsible（折り畳み）にして視認性を確保
* ステータス変更後の再取得で進捗率を常に最新に保つ

### 7.2 セキュリティ・拡張性

* 現状はローカル開発・個人利用を想定し、単一デモユーザーのみ
* HTTPS / 認証 / アクセス制御は未実装（実運用時には別途設計が必要）
* API ベース設計のため、以下の機能追加を将来検討可能：
  * 認証・メンバー管理
  * コメント / チャット
  * タグ管理
  * 通知機能
  * 依存関係の可視化（PERT 風）

